# λ¶€ν• λ¶„μ‚°

- [λ¶€ν• λ¶„μ‚°](#λ¶€ν•-λ¶„μ‚°)
  - [λ³µμ μ„λ²„μ™€ λ¶€ν• λ¶„μ‚°](#λ³µμ-μ„λ²„μ™€-λ¶€ν•-λ¶„μ‚°)
    - [DNS μ„λ²„μ λΌμ΄λ“ λ΅λΉ λ°©μ‹μΌλ΅ μ‘λ‹µ](#dns-μ„λ²„μ-λΌμ΄λ“-λ΅λΉ-λ°©μ‹μΌλ΅-μ‘λ‹µ)
    - [λ¶€ν• λ¶„μ‚° μ¥μΉ](#λ¶€ν•-λ¶„μ‚°-μ¥μΉ)
  - [μΊμ‹ μ„λ²„μ™€ λ¶€ν• λ¶„μ‚°](#μΊμ‹-μ„λ²„μ™€-λ¶€ν•-λ¶„μ‚°)
  - [CDN (μ½ν…μΈ  λ¶„λ°° λ„¤νΈμ›ν¬)](#cdn-μ½ν…μΈ -λ¶„λ°°-λ„¤νΈμ›ν¬)
  - [μ°Έκ³  λ¬Έν—](#μ°Έκ³ -λ¬Έν—)

## λ³µμ μ„λ²„μ™€ λ¶€ν• λ¶„μ‚°

λ€λ‰μ ν¨ν‚·μ΄ ν•λ‚μ μ„λ²„μ— λ“¤μ–΄μ¤λ©΄ μ²λ¦¬λ¥λ ¥μ΄ λ¶€μ΅±ν•  μ μλ‹¤.

λ³µμμ μ„λ²„λ΅ μ²λ¦¬λ‰μ„ λ¶„μ‚° μ²λ¦¬ν•μ—¬ κ·Ήλ³µν•  μ μλ‹¤.

### DNS μ„λ²„μ λΌμ΄λ“ λ΅λΉ λ°©μ‹μΌλ΅ μ‘λ‹µ

1. DNS μ„λ²„μ— λ³µμμ μ„λ²„ IP μ£Όμ†λ¥Ό κ°™μ€ μ΄λ¦„μΌλ΅ μ—¬λ¬κ° λ“±λ΅ν•λ‹¤.

2. ν΄λΌμ΄μ–ΈνΈμ—μ„ DNS μ„λ²„μ— μ΅°ν ν•  λ•, λΌμ΄λ“ λ΅λΉ λ°©μ‹μΌλ΅ λ³µμμ μ„λ²„ IPλ¥Ό μ°¨λ΅€λ€λ΅ μ‘λ‹µν•΄μ¤€λ‹¤.

μ΄ λ°©μ‹μ€ 2κ°€μ§€ λ¬Έμ κ°€ μλ‹¤.

a. νΉμ • μ„λ²„κ°€ κ³ μ¥λ‚¬μ„ λ•

      DNS μ„λ²„λ” κ·Έλ€λ΅ ν΄λΌμ΄μ–ΈνΈμ—κ² κ³ μ¥λ‚ μ„λ²„ IPλ¥Ό μ•λ ¤μ£Όμ–΄ μ •μƒμ μΈ μ‘λ‹µμ„ λ°›μ„ μ μ—†λ‹¤.

b. ν•λ‚μ λ΅μ§μ΄ λ³µμμ μ”μ²­μΌλ΅ λ‚λ μ΅μ„ λ•

      λ³µμμ μ”μ²­μ΄ κ°μ λ‹¤λ¥Έ μ„λ²„κ°€ μ‘λ‹µν•λ©΄ λ΅μ§μ΄ μ΄μ–΄μ§€μ§€ μ•μ„ μ μλ‹¤.

  > π¤” API μ„¤κ³„λ¥Ό μλ»ν–μ„ κ²½μ°μ— ν•΄λ‹Ήν•μ§€ μ•λ‚

### λ¶€ν• λ¶„μ‚° μ¥μΉ

λ€ν‘μ μΌλ΅ 2κ°€μ§€ μΆ…λ¥κ°€ μλ‹¤.

<table>
  <tr>
    <th></th>
    <th>L4 λ΅λ“λ°Έλ°μ„</th>
    <th>L7 λ΅λ“λ°Έλ°μ„</th>
  </tr>
  <tr>
    <td>μ •μ</td>
    <td>
      IP, ν¬νΈλ¥Ό κΈ°μ¤€μΌλ΅ μ¤μΌ€μ¤„λ§ μ•κ³ λ¦¬μ¦μ„ ν†µν•΄ λ¶€ν• λ¶„μ‚°ν•λ‹¤.
    </td>
    <td>
      IP, ν¬νΈ μ™Έμ—λ„ URI, HTTP Header, Cookieλ¥Ό κΈ°μ¤€μΌλ΅ λ¶€ν• λ¶„μ‚°ν•λ‹¤.
    </td>
  </tr>
  <tr>
    <td>μ‚¬λ΅€</td>
    <td>
<p>
μ„λ²„μ λ„¤νΈμ›ν¬ λ¶€ν• μƒνƒ

    cf. A, B, C μ„λ²„κ°€ μ΅΄μ¬ν•  λ•
        Aμ λ¶€ν• μƒνƒλ¥Ό CPU μ‚¬μ©λ‰μΌλ΅ μ²΄ν¬ν•μ—¬ λ†’μ„μ‹
        Bμ— λ¶€λ‹΄

μ„λ²„μ μ²λ¦¬ λ¥λ ¥

    cf. μ„λ²„ λ¶€ν• λ¶„μ‚° λΉ„μ¨μ΄ 100% μ΄κ³ ,
        μµλ€ μ²λ¦¬ λ¥λ ¥μ΄ 10μΌλ•

        μ²λ¦¬ λ¥λ ¥μ΄ 3μΈ A, B, C μ„λ²„μ— κ° 30%λ¥Ό
        μ²λ¦¬ λ¥λ ¥μ΄ 1μΈ D μ„λ²„μ— 10%λ¥Ό ν• λ‹Ή
</p>
    </td>
    <td>
<p>
μ„λ²„μ μ—­ν• 

    cf. κ²°μ  λ‹΄λ‹Ή μ„λ²„, νμ›κ°€μ… λ‹΄λ‹Ή μ„λ²„
</p>
    </td>
  </tr>
  <tr>
    <td rowspan="2">μ¥μ </td>
    <td colspan="2">
      <center>λ¬΄μ¤‘λ‹¨ μ„λΉ„μ¤ λ³΄μ¥</center>
    </td>
  </tr>
  <tr>
    <td width="30%">
      <center>-</center>
    </td>
    <td width="70%">  
<p>
ν•λ‚μ λ΅μ§μ΄ λ³µμμ μ”μ²­μΌλ΅ λ‚λ μ§„ κ²½μ°

Cookie μ΄μ©μ‹, 

μ”μ²­ κ°„ μ „ν›„ κ΄€κ³„ νμ•…ν•΄μ„ κ°™μ€ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚Ό μ μλ‹¤.
</p>
    </td>
  </tr>
  <tr>
    <td>λ‹¨μ </td>
    <td><center>-</center></td>
    <td>
<p>
μƒμ„ κ³„μΈµ(L7)μ„ ν™μ©ν•λ” μ¥μΉλ” ν•μ„ κ³„μΈµ(L4)μ„ ν™μ©ν•  μ¤„ μ•μ•„μ•Όν•λ‹¤.

κ·ΈλΌ λ¨λ“  μ¥μΉκ°€ L7μ„ μ‚¬μ©ν•λ‹¤λ©΄, λ©΄λ°€ν• λ¶„μ„ κΈ°λ¥μ— λ€ν• λΉ„μ©μ΄ ν¬λ‹¤.

μ μ ν• μƒν™©μ— λ§κ² μ‚¬μ©ν•΄μ•Όν•λ‹¤.
</p>
    </td>
  </tr>
</table>
    
## μΊμ‹ μ„λ²„μ™€ λ¶€ν• λ¶„μ‚°

μΊμ‹ μ„λ²„λ” ν”„λ΅μ‹ κµ¬μ΅°λ¥Ό μ‚¬μ©ν•λ‹¤.

ν”„λ΅μ‹λ” μ¤‘κ°μ μλ―Έλ¥Ό λ‚νƒ€λ‚Έλ‹¤.

    μ¤‘κ°: μ μ‚Όμλ΅μ„ λ‘ λ‹Ήμ‚¬μ μ‚¬μ΄μ— μ„μ„ μΌμ„ μ£Όμ„ ν•λ‹¤

> μ΄μ „ 13μ£Όμ°¨μ—μ„ μ¤‘κ³„ μ¥μΉμ μ¤‘κ³„λ” "μ¤‘κ°„μ—μ„ μ΄μ–΄μ¤€λ‹¤"λ” μλ―Έμ΄λ‹¤.

μ£Όμ μ—μ„ λ‹¤λ£¨λ” λ„¤νΈμ›ν¬ ν”„λ΅μ‹λ” μ›Ήμ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ—μ„ μ›Ήμ„λ²„μ— λ€ν• μ”μ²­μ„ μ¤‘κ°ν•λ‹¤.

λ„¤νΈμ›ν¬ ν”„λ΅μ‹λ” 2κ°€μ§€ μ—­ν• μ„ ν•λ‹¤.

1. μΊμ‹±
  
    > μΊμ‹± λ™μ‘ κ³Όμ •μ€ [λ§ν¬](https://slides.com/kimyongki/deck-e6fd5d/fullscreen)λ¥Ό ν™•μΈν•μ.

    > μΊμ‹ μ„λ²„κ°€ κ½‰ μ°¨λ©΄, μμ£Ό μ‚¬μ©λμ§€ μ•λ” λ°μ΄ν„°λ¥Ό μ‚­μ ν•λ‹¤.
     μ‚­μ  λ€μƒ μ„ λ³„μ€ μ΄μμ²΄μ μ νμ΄μ§€ κµμ²΄ μ•κ³ λ¦¬μ¦κ³Ό λΉ„μ·ν•  κ²ƒμ΄λΌ νλ‹¨ν•λ‹¤.

2. λ°©ν™”λ²½

    > λ°©ν™”λ²½μ λ™μ‘μ€ μ΄μ „ 14μ£Όμ°¨λ¥Ό μ°Έκ³ ν•μ.
      
λ„¤νΈμ›ν¬ ν”„λ΅μ‹λ” 2κ°€μ§€ μΆ…λ¥κ°€ μλ‹¤.

<table>
  <tr>
    <th colspan="2"></th>
    <th>ν¬μ›λ“ ν”„λ΅μ‹</th>
    <th>λ¦¬λ²„μ¤ ν”„λ΅μ‹</th>
  </tr>
  <tr>
    <td colspan="2">μμ‹ μ‚¬μ§„</td>
    <td><img src="assets/forward-proxy.png"/></td>
    <td><img src="assets/reverse-proxy.png"/></td>
  </tr>
  <tr>
    <td rowspan="4">νΉμ§•</td>  
    <td>μΊμ‹±</td>
    <td colspan="2">μ»¨ν…μΈ λ“¤μ„ μΊμ‹±ν•΄μ„ μ„±λ¥ ν–¥μƒμ— κΈ°μ—¬ν•λ‹¤.</td>
  <tr>
  </tr>
  <tr>
    <td>μµλ…μ„±</td>
    <td>μΈν„°λ„·μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ£Όμ†κ°€ κ°μ¶°μ§„λ‹¤.</td>
    <td>μΈν„°λ„·μ—μ„ μ„λ²„ μ£Όμ†κ°€ κ°μ¶°μ§„λ‹¤.</td>
  </tr>
  <tr>
    <td>λ³΄μ•</td>
    <td>μ‚¬λ‚΄λ§μ—μ„ ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µν•΄ μ •ν•΄μ§„ μ‚¬μ΄νΈλ§ μ—°κ²° ν•  μ μλ„λ΅ μ„¤μ •ν•λ‹¤.</td>
    <td>μ„λ²„ μ•λ‹¨μ—μ„ μ•…μμ μΈ μ”μ²­μ„ ν•„ν„°λ§ν•λ‹¤.</td>
  </tr>  
</table>

ν”„λ΅μ‹ μ„λ²„λ΅ λ¶€ν„° μµλ…μ„±μ„ λ³΄μ¥ν•λ ¤λ©΄ μ–΄λ–»κ² ν•΄μ•Όν• κΉ?

TORμ„ μ‚¬μ©ν•λ©΄ λλ‹¤.

TORμ€ μ„Έ κ°μ ν”„λ΅μ‹λ΅ κµ¬μ„±λ μ²΄μΈμ„ μ„μλ΅ μ„ νƒν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ λ¨λ“  νΈλν”½μ„ μ΄ μ²΄μΈ μƒμΌλ΅ μ „μ†΅ν•λ‹¤.

ν”„λ΅μ‹λ“¤μ€ μ„λ΅ κ³µλ¨ν•μ§€ μ•μμ΄ λ³΄μ¥λλ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν†µμ‹ μ€ μ•„λ¬΄λ„ μ•μ§€ λ»ν•λ‹¤.

## CDN (μ½ν…μΈ  λ¶„λ°° λ„¤νΈμ›ν¬)

CDNμ€
    
    λ¶„μ‚°λ λ‹¤μμ μΊμ‹ μ„λ²„λ¥Ό μ΄μν•λ©°, μ»¨ν…μΈ μ λ³µμ‚¬λ³Έμ„ μ΄λ“¤μ— μ €μ¥ν•λ‹¤.    

μΌλ°ν™”λ΅

    ν΄λΌμ΄μ–ΈνΈλ” λ³Έμ‚¬κ°€ μ•„λ‹ μ²΄μΈμ μ„ μ΄μ©ν•λ” κ²ƒμ΄λ‹¤.

μ΄μ μΌλ΅λ”

   - Origin μ„λ²„μ™€ λ¬Όλ¦¬μ μΌλ΅ λ–¨μ–΄μ Έμλ” ν΄λΌμ΄μ–ΈνΈμ—κ² 
    
      ν΄λΌμ΄μ–ΈνΈμ™€ κ°€κΉμ΄ μΊμ‹ μ„λ²„μ—μ„ λΉ λ¥Έ μ‘λ‹µμ„ μ κ³µν•λ‹¤.

   - Origin μ„λ²„μ— λ¬Έμ κ°€ μƒκ²¨λ„ μΊμ‹ μ„λ²„λ΅ λ€μ²΄λ¥Ό ν•  μ μλ‹¤. 
      μ¦‰, μ„λΉ„μ¤λ¥Ό λ¬΄μ¤‘λ‹¨ν•  μ μλ‹¤.

   - Origin μ„λ²„μ— μ§‘μ¤‘λ νΈλν”½μ„ λ°©μ§€ν•  μ μλ‹¤. 

ν΄λΌμ΄μ–ΈνΈμ™€ κ°€κΉμ΄ μΊμ‹ μ„λ²„ μ„ λ³„ λ°©λ²•μ€ μ΄λ ‡λ‹¤.

<center><img width="60%" src="assets/cdn.drawio.svg"/></center>

   1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„ λ„λ©”μΈμ— λ°©λ¬Έν•μ—¬, CDN μ²λ¦¬λλ” κ²½λ΅μ— λ“¤μ–΄κ°„λ‹¤.

   2. ν΄λΌμ΄μ–ΈνΈμ DNS μ΅°νμ‹, `ν΄λΌμ΄μ–ΈνΈμΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`λ” `μ„λ²„μΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`λ΅ μ”μ²­μ„ μ „λ‹¬ν•λ‹¤.

   3. `μ„λ²„μΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`λ” IP μ£Όμ† λ€μ‹  CDN μ„λ²„ λ„λ©”μΈμ„ `ν΄λΌμ΄μ–ΈνΈμΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`μ— μ‘λ‹µν•λ‹¤.

   4. `ν΄λΌμ΄μ–ΈνΈμΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`λ” CDN DNS μ„λ²„μ— CDN μ„λ²„ λ„λ©”μΈμ„ μ”μ²­ν•μ—¬ 

   5. CDN μ„λ²„μ IPλ¥Ό μ‘λ‹µλ°›λ”λ‹¤.

      ν•΄λ‹Ή CDN μ„λ²„μ IPλ” ν΄λΌμ΄μ–ΈνΈμΈ΅κ³Ό κ°€κΉμ΄ μΊμ‹ μ„λ²„λ¥Ό μλ―Έν•λ‹¤.

      μ‚¬μ „μ— `μ„λ²„μΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`μ—μ„ λ‹¤μμ μΊμ‹ μ„λ²„κ°€ κ±°μ³μ¤λ” κ° λΌμ°ν„°μ κ²½λ΅ν‘λ¥Ό μ…μν•΄μ¨λ‹¤.

      λΌμ°ν„°μ κ²½λ΅ν‘λ“¤λ΅ μ–΄λ–¤ λΌμ°ν„°κ°€ `ν΄λΌμ΄μ–ΈνΈμΈ΅κ°€ κ°€κΉμ΄ DNS μ„λ²„`μ™€ κ°€κΉμ΄μ§€ λ€λµμ μΈ κ±°λ¦¬λ¥Ό μ• μ μλ‹¤κ³  ν•λ‹¤.

      ```bash
      C:\Users\ygflo>tracert "www.youtube.com"

      μµλ€ 30ν™‰ μ΄μƒμ
      youtube-ui.l.google.com [142.250.207.14](μΌ)λ΅ κ°€λ” κ²½λ΅ μ¶”μ :

        1    15 ms    24 ms    10 ms  edge.oneqdc.com [192.210.0.1]
        2     2 ms     2 ms     2 ms  210.123.255.3
      ```

   6. `ν΄λΌμ΄μ–ΈνΈμΈ΅κ³Ό κ°€κΉμ΄ DNS μ„λ²„`λ” ν΄λΌμ΄μ–ΈνΈμ—κ² CDN μ„λ²„μ IPλ¥Ό μ•λ ¤μ¤€λ‹¤.

μΊμ‹ μ„λ²„μ—λ” μΊμ‹±ν•λ” 2κ°€μ§€ λ°©λ²•μ΄ μλ‹¤.

- μ •μ  μΊμ‹±

  μΊμ‹±ν•  μ”μ†λ¥Ό λ―Έλ¦¬ μΊμ‹ μ„λ²„μ— κ°€μ Έλ‹¤ λ‘”λ‹¤.
  
  μ •μ  μ»¨ν…μΈ λ¥Ό μΊμ‹±ν•λ”λ°,

      cf. μ΄λ―Έμ§€, λ™μμƒ λ“±

- λ™μ  μΊμ‹±

  ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ„ λ³΄λ‚Ό λ• μΊμ‹ μ„λ²„μ— μλ”μ§€ ν™•μΈ ν›„

  μμΌλ©΄ λ°”λ΅ μ‘λ‹µν•κ³ , μ—†μΌλ©΄ Origin μ„λ²„μ— μ”μ²­ν•΄μ„ λ°›μ•„μ¨λ‹¤.

  λ™μ  μ»¨ν…μΈ λ¥Ό μΊμ‹±ν•λ”λ°,

      cf. API μ”μ²­μ κ²°κ³Ό

  μΊμ‹±λ μ”μ†κ°€ μ—…λ°μ΄νΈ λ μ—¬λ¶€λ” 
  
      - μ»¨ν…μΈ μ λ°”μ΄νΈ λ‹¨μ„λ΅ ν™•μΈν•λκ°€,

      - λ‚ μ”¨μ™€ κ°™μ΄ μ£ΌκΈ°μ μΈ μ—…λ°μ΄νΈλ¥Ό ν•λ” λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

<hr/>

## μ°Έκ³  λ¬Έν—

[γ€μ„±κ³µκ³Ό μ‹¤ν¨λ¥Ό κ²°μ •ν•λ” 1%μ λ„¤νΈμ›ν¬ μ›λ¦¬γ€ μ±•ν„°5 μ”μ•½λ³Έ ](https://yjksw.github.io/one-percent-network-7/) β” *FromCoding*

[HTTP μ”μ²­ ν—¤λ” IF-Match, IF-Modified-Since](https://withbundo.blogspot.com/2017/07/http-13-http-iii-if-match-if-modified.html) β” *IT μ—”μ§€λ‹μ–΄μ μ†λ°•ν• κ°μΈ λ°•λ¬Όκ΄€*

[λ„¤νΈμ›ν¬ ν”„λ΅μ‹ μΆ…λ¥λ³„ νΉμ§•](https://github.com/NKLCWDT/cs/blob/main/Network/ν”„λ΅μ‹.md) β” *Github*

[CDN](https://www.youtube.com/watch?v=_kcoeK0ITkQ&ab_channel==μ–„νν•μ½”λ”©μ‚¬μ „) β” *μ–„νν• μ½”λ”©μ‚¬μ „*

[L4/L4 λ΅λ“λ°Έλ°μ„ μ°¨μ΄](https://jaehoney.tistory.com/73) β” *Jae Honey*

[L4 μ¤μ„μΉ μ‰½κ² μ΄ν•΄ν•κΈ°](https://aws-hyoh.tistory.com/69) β” *λ„¤νΈμ›ν¬ μ—”μ§€λ‹μ–΄ ν™μμ κΈ°μ λΈ”λ΅κ·Έ*