# 테이블 설계와 릴레이션

- [테이블 설계와 릴레이션](#테이블-설계와-릴레이션)
  - [데이터 모델링 기술의 중요성](#데이터-모델링-기술의-중요성)
  - [정규화 수행과정](#정규화-수행과정)
    - [1차 정규화](#1차-정규화)
    - [2차 정규화](#2차-정규화)
    - [3차 정규화](#3차-정규화)
    - [보이스-코드 정규화](#보이스-코드-정규화)
    - [맺음말](#맺음말)
  - [참고 문헌](#참고-문헌)

## 데이터 모델링 기술의 중요성

데이터 모델링은

복잡한 정보를 관리하고 싶은 경우가 존재하는데,

    cf. - 상품을 판매하고, 고객 지원을 실시하는 경우

        - 문의를 해온 고객이 블랙 리스트 인물인 경우
        - 
테이블은 반드시 정해진 포맷이 있는 것이 아니다.

    애플리케이션은 사용자를 위해서 있는 것이고, 
    
    그 사용자의 요구에 따라 테이블은 어떻게든 달라진다.

때문에, 필요한 데이터 항목을 나열하고 테이블 설계에 도입해 나가는 작업을 말한다.

데이터 관리는 데이터 일관성을 유지하는 것을 말한다.

어떠한 시나리오에 일관성이 무너지며, 이를 해결해나가는 과정을 볼 것이다.

## 정규화 수행과정

정규화는

    데이터 처리 연산시 각종 이상현상이 발생하는 테이블을 데이터 모델링하는 행위다.

이상현상에는

### 1차 정규화

    테이블 구성에서 중복/반복/복합값을 없앤다.

    - 중복한 열 값의 일부를 수정하면 그것을 감지할 수 없고,

    - 반복값은

    - 복합값은 애플리케이션에서 순차 처리와 같은 작업을 요구하기 때문이다.

<table>
  <tr>
    <th>정규화 이전</th>
    <th>1차 정규화</th>
  </tr>
  <tr>
    <td>
<p>

    +----------+--------+------------------------------+
    | 학번(pk) |  이름  |            과목명            |
    +----------+--------+------------------------------+
    |   1111   | 김용기 |    데이터베이스, 운영체제    |
    +----------+--------+------------------------------+
    |   2222   | 김지용 | 운영체제, 네트워크, 자료구조 |
    +----------+--------+------------------------------+
    |   3333   | 신범철 |           자료구조           |
    +----------+--------+------------------------------+
</p>
    </td>
    <td>
<p>

    +---------+----------+--------+----------+--------------+
    | _id(pk) | 학번(fk) |  이름  | 과목코드 |    과목명    |
    +---------+----------+--------+----------+--------------+
    |    1    |   1111   | 김용기 |    D11   | 데이터베이스 |
    +---------+----------+--------+----------+--------------+
    |    2    |   1111   | 김용기 |    O22   |   운영체제   |
    +---------+----------+--------+----------+--------------+
    |    3    |   2222   | 김지용 |    O22   |   운영체제   |
    +---------+----------+--------+----------+--------------+
    |    4    |   2222   | 김지용 |    N33   |   네트워크   |
    +---------+----------+--------+----------+--------------+
    |    5    |   2222   | 김지용 |    N44   |   자료구조   |
    +---------+----------+--------+----------+--------------+
    |    6    |   3333   | 신범철 |    N44   |   자료구조   |
    +---------+----------+--------+----------+--------------+
</p>
    </td>
  </tr>
</table>

### 2차 정규화

    pk에 의존하지 않는 열을 분리한다.

    > 🤔 예시가 3차 정규화랑 차이가 없다.

<table>
  <tr>
    <th>정규화 이전</th>
    <th colspan="2">2차 정규화</th>
  </tr>
  <tr>
    <td align="center">인적 테이블 + a</td>
    <td align="center">인적 테이블</td>
    <td align="center">과목 테이블</td>
  </tr>
  <tr>
    <td>
<p>

    +---------+----------+--------+----------+--------------+------+
    | _id(pk) | 학번(fk) |  이름  | 과목코드 |    과목명    | 학점 |
    +---------+----------+--------+----------+--------------+------+
    |    1    |   1111   | 김용기 |    D11   | 데이터베이스 |   B  |
    +---------+----------+--------+----------+--------------+------+
    |    2    |   1111   | 김용기 |    O22   |   운영체제   |   A  |
    +---------+----------+--------+----------+--------------+------+
    |    3    |   2222   | 김지용 |    O22   |   운영체제   |   B  |
    +---------+----------+--------+----------+--------------+------+
    |    4    |   2222   | 김지용 |    N33   |   네트워크   |   A  |
    +---------+----------+--------+----------+--------------+------+
    |    5    |   2222   | 김지용 |    N44   |   자료구조   |   A  |
    +---------+----------+--------+----------+--------------+------+
    |    6    |   3333   | 신범철 |    N44   |   자료구조   |   A  |
    +---------+----------+--------+----------+--------------+------+

</p>
    </td>
    <td>
<p>

    +---------+----------+--------+--------------+------+
    | _id(pk) | 학번(fk) |  이름  | 과목코드(fk) | 학점 |
    +---------+----------+--------+--------------+------+
    |    1    |   1111   | 김용기 |      D11     |   B  |
    +---------+----------+--------+--------------+------+
    |    2    |   1111   | 김용기 |      O22     |   A  |
    +---------+----------+--------+--------------+------+
    |    3    |   2222   | 김지용 |      O22     |   B  |
    +---------+----------+--------+--------------+------+
    |    4    |   2222   | 김지용 |      N33     |   A  |
    +---------+----------+--------+--------------+------+
    |    5    |   2222   | 김지용 |      N44     |   A  |
    +---------+----------+--------+--------------+------+
    |    6    |   3333   | 신범철 |      N44     |   A  |
    +---------+----------+--------+--------------+------+
</p>
    </td>
    <td>
<p>

    +--------------+--------------+
    | 과목코드(pk) |    과목명    |
    +--------------+--------------+
    |      D11     | 데이터베이스 |
    +--------------+--------------+
    |      O22     |   운영체제   |
    +--------------+--------------+
    |      N33     |   네트워크   |
    +--------------+--------------+
    |      N44     |   자료구조   |
    +--------------+--------------+
</p>
    </td>
  </tr>
</table>

### 3차 정규화

    pk에 의존하지 않지만 그 밖에 다른 열에 의존하는 열을 분리한다.

<table>
  <tr>
    <th>정규화 이전</th>
    <th colspan="2">3차 정규화</th>
  </tr>
    <tr>
    <td align="center">인적 테이블 + a</td>
    <td align="center">인적 테이블</td>
    <td align="center">강의실 테이블</td>
  </tr>
  <tr>
    <td>
<p>

    +---------+----------+--------+--------------+------+--------+
    | _id(pk) | 학번(fk) |  이름  | 과목코드(fk) | 학점 | 강의실 |
    +---------+----------+--------+--------------+------+--------+
    |    1    |   1111   | 김용기 |      D11     |   B  |   301  |
    +---------+----------+--------+--------------+------+--------+
    |    2    |   1111   | 김용기 |      O22     |   A  |   302  |
    +---------+----------+--------+--------------+------+--------+
    |    3    |   2222   | 김지용 |      O22     |   B  |   302  |
    +---------+----------+--------+--------------+------+--------+
    |    4    |   2222   | 김지용 |      N33     |   A  |   303  |
    +---------+----------+--------+--------------+------+--------+
    |    5    |   2222   | 김지용 |      N44     |   A  |   305  |
    +---------+----------+--------+--------------+------+--------+
    |    6    |   3333   | 신범철 |      N44     |   A  |   305  |
    +---------+----------+--------+--------------+------+--------+
</p>
    </td>
    <td>
<p>

    +---------+----------+--------+--------------+------+
    | _id(pk) | 학번(fk) |  이름  | 과목코드(fk) | 학점 |
    +---------+----------+--------+--------------+------+
    |    1    |   1111   | 김용기 |      D11     |   B  |
    +---------+----------+--------+--------------+------+
    |    2    |   1111   | 김용기 |      O22     |   A  |
    +---------+----------+--------+--------------+------+
    |    3    |   2222   | 김지용 |      O22     |   B  |
    +---------+----------+--------+--------------+------+
    |    4    |   2222   | 김지용 |      N33     |   A  |
    +---------+----------+--------+--------------+------+
    |    5    |   2222   | 김지용 |      N44     |   A  |
    +---------+----------+--------+--------------+------+
    |    6    |   3333   | 신범철 |      N44     |   A  |
    +---------+----------+--------+--------------+------+
</p>
    </td>
    <td>
<p>

    +--------------+--------+
    | 과목코드(pk) | 강의실 |
    +--------------+--------+
    |      D11     |   301  |
    +--------------+--------+
    |      O22     |   302  |
    +--------------+--------+
    |      N33     |   303  |
    +--------------+--------+
    |      N44     |   305  |
    +--------------+--------+
</p>
    </td>
  </tr>
</table>

### 보이스-코드 정규화

<table>
  <tr>
    <th>정규화 이전</th>
    <th colspan="2">보이스-코드 정규화</th>
  </tr>
    <tr>
    <td align="center">과목 테이블 + a</td>
    <td align="center">과목 테이블</td>
    <td align="center">교수 테이블</td>
  </tr>
  <tr>
    <td>
<p>

    +---------+----------+--------------+------+--------+
    | _id(pk) | 과목코드 |    과목명    | 교수 | 교재명 |
    +---------+----------+--------------+------+--------+
    |    1    |    D11   | 데이터베이스 |  P1  |  Book1 |
    +---------+----------+--------------+------+--------+
    |    2    |    O22   |   운영체제   |  P2  |  Book2 |
    +---------+----------+--------------+------+--------+
    |    3    |    O22   |   운영체제   |  P2  |  Book3 |
    +---------+----------+--------------+------+--------+
    |    4    |    N33   |   네트워크   |  P2  |  Book4 |
    +---------+----------+--------------+------+--------+
    |    5    |    N44   |   자료구조   |  P1  |  Book5 |
    +---------+----------+--------------+------+--------+
</p>
    </td>
    <td>
<p>

    +---------+----------+--------------+--------+
    | _id(pk) | 과목코드 |    과목명    | 교재명 |
    +---------+----------+--------------+--------+
    |    1    |    D11   | 데이터베이스 |  Book1 |
    +---------+----------+--------------+--------+
    |    2    |    O22   |   운영체제   |  Book2 |
    +---------+----------+--------------+--------+
    |    3    |    O22   |   운영체제   |  Book3 |
    +---------+----------+--------------+--------+
    |    4    |    N33   |   네트워크   |  Book4 |
    +---------+----------+--------------+--------+
    |    5    |    N44   |   자료구조   |  Book5 |
    +---------+----------+--------------+--------+
</p>
    </td>
    <td>
<p>

    +---------+----------+------+--------+
    | _id(pk) | 과목코드 | 교수 | 교재명 |
    +---------+----------+------+--------+
    |    a    |    D11   |  P1  |  Book1 |
    +---------+----------+------+--------+
    |    b    |    O22   |  P2  |  Book2 |
    +---------+----------+------+--------+
    |    c    |    O22   |  P2  |  Book3 |
    +---------+----------+------+--------+
    |    d    |    N33   |  P2  |  Book4 |
    +---------+----------+------+--------+
    |    e    |    N44   |  P1  |  Book5 |
    +---------+----------+------+--------+
</p>
    </td>
  </tr>
</table>

<hr/>

### 맺음말

<dl><dt>
관계형을 많이 사용해보지 못하고, depth가 큰 데이터를 다루기 위해 NoSQL 위주로만 사용해본 바로써

일관성 측면에서 관계형의 활용은 중요하다고 생각되며,

이를 위한 테이블 설계는 익숙해질수 밖에 없다.
</dt></dt>

<hr/>

## 참고 문헌

[정규화 수행과정](https://www.topcit.or.kr/upload/edubox/essence/ess_ko_02/index.html) ━ *TOPCIT*
