# LAN 어댑터

## 들어가며

이전 TCP 계층에서 데이터 송·수신 동작을 알아보았는데, 

이 의뢰를 주고 받는 IP와 이더넷 계층에서 패킷을 송·수신 하는 동작을 알아보겠다.

## 패킷의 기본

중계장치

    ...

> 패킷의 경로 복수의 허브가 추가된 그림 필요성

IP와 MAC의 역할을 분담하는 이유

    거대한 네트워크를 구축하기 위해서

IP 역할

    IP주소로 표시된 목적지까지 패킷을 전달

MAC 역할

    LAN을 사용하여 가장 가까운 라우터까지 패킷을 전달

## IP 헤더를 만든다.

IP 헤더의 주요 항목은 수신처 IP 주소 / 송신처 IP 주소 이다.

수신처 IP 주소는

    애플케이션에서 시작된 통지로 TCP 계층을 거친 IP 주소이다.

송신처 IP 주소는

    LAN 어댑터에 할당된 주소를 사용한다.

송신처의 LAN 어댑터가 여러 개인 상황에서는

    프로토콜 스택 내부의 IP 경로표 (라우팅 테이블)를 보고 판단한다.

송신측의 IP 경로표와 라우터의 IP 경로표는 경로가 서로 동기화 되어있다.

> 언제 맞춰졌나? 접속에서 맞춰지나?

어느 LAN 어댑터에서 패킷을 송신해야 하는지 알고 나면,

LAN 어댑터에 할당되어 있는 IP 주소를 IP 헤더의 송신처 IP 주소로 설정한다. (바꾼다?)

## MAC 헤더를 만든다.