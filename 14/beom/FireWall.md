# 방화벽의 원리와 동작

## 목차
- 방화벽의 정의
- 1세대 방화벽 : 패킷 필터
  - 패킷 필터링 조건
- 인터넷 -> 사내 LAN
- 방화벽으로 막을 수 없는 공격
- 참고문헌

## 방화벽의 정의
> 방화벽은 미리 정의된 보안 규칙에 기반한, 들어오고 나가는 네트워크 트래픽을 모니터링하고 제어하는 네트워크 보안 시스템이다.</br>
> 방화벽은 일반적으로 신뢰할 수 있는 내부 네트워크, 신뢰할 수 없는 외부 네트워크(Ex : 인터넷) 간의 장벽을 구성한다. 서로 다른 네트워크를 지나는 데이터를 허용하거나 거부하거나 검열, 수정하는 하드웨어나 소프트웨어 장치이다.


## 1세대 방화벽 : 패킷 필터
특정 서버와 해당 서버 안의 특정 어플리케이션에 액세스 하는 패킷만 통과하고 나머지는 차단한다.

우리는 가장 많이 보급된 패킷 필터링형 으로 탐색을 할 것이다.

### 패킷 필터링 조건
패킷의 헤더에 있는 제어 정보들을 통해 필터링 조건을 설정한다.

![패킷 필터링 헤더](asset/1.PNG)
![패킷 필터링 헤더2](asset/2.PNG)

위 사진과 같은 헤더들이 주로 사용된다.</br>
=> 주소, 포트 번호, 컨트롤 비트 등이 사용됨

![패킷필터링 예시](asset/3.PNG)

위와 같이 조건을 통해 통과하고 차단한다.

위와 같은 구조에서는 `공개 서버용 LAN과 사내 LAN 패킷 조건`, `인터넷과 사내 LAN 패킷` 조건도 설정해야한다.

=> 예를 들어 사내 LAN과 공개 서버용 LAN의 패킷을 허용하기 위해 수신처 IP가 공개 서버용 LAN과 일치하면 모두 통과 시켰다면

인터넷에서 흘러온 패킷은 무조건 공개 서버용 LAN으로 유입되어 서버가 위험에 진다.

## 인터넷 -> 사내 LAN
결론부터 이야기 하면 **불가능**하다.</br>
사내 LAN은 프라이비트 주소를 사용하고 라우터의 의해 글로벌 주소로 변환되어 나간다고 배웠다.</br>

하지만 반대로 인터넷에서 사내 LAN으로 경우 주소 변환을 안한 글로벌 주소이기 때문에 인터넷에 있는 패킷을 사내 LAN을 찾지 못한다.

## 방화벽으로 막을 수 없는 공격
특수한 데이터를 포함한 패킷으로 서버를 공격하는 경우, 방화벽은 헤더의 정보만으로 필터링 하기 때문에 차단이 불가능하다.

**대처법**
- 웹 서버 소프트웨어 자체의 버그를 고쳐 새로운 버전을 내는 방법
- 패킷의 내용을 조사하여 위험한 데이터를 차단하는 별도의 소프트웨어를 준비하는 방법




## 참고문헌
[방화벽의 정의](https://ko.wikipedia.org/wiki/%EB%B0%A9%ED%99%94%EB%B2%BD_(%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%82%B9))